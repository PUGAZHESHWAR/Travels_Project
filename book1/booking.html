<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAvM9QYZOZaZPsHIOfnTWHJdbRiSHCuOUE&libraries=places"></script> -->

  <title>Car Rental</title>
  <!-- <link rel="stylesheet" href="style.css"> -->
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
/* width: 100%; */
      /* display: flex;
      justify-content: center;
      align-items: center; */
      background-color: #fff;
    }
  
  /* .projet{
    max-width: 450px;
  } */

  .fixed-header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background-color:rgb(61,4,4); 
      color: white;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000; 
      box-sizing: border-box; 
  }
  

  .header-left {
      flex: 1;
  }
  
  .company-logo {
      height: 50px;
      width: auto;
  }
  
 
  .header-right {
      /* display: flex; */
      margin-right: 20px;
      float: left;
      /* flex: 2;*/
      justify-content: center; 
  }
  
  .contact-info {
      display: flex;
      align-items: center;
  }
  
  .phone-box {
      background-color: white;
      color:rgb(61,4,4);
      padding: 6px 10px;
      border-radius: 20px;
      display: flex;
      align-items: center;
      font-size: 14px; 
  }
  
  .phone-icon {
      margin-right: 8px;
      font-size: 16px;
  }
  .route-i{
      display:flex;
      font-size: 12px;
      align-items: center;
      margin-bottom: 10px;
      justify-content: space-around;
      padding-right: 10px;
  }
  .route{
      display: flex;
      flex-direction: column;
      margin-left: 5px;
  }
  .route-n{
      font-size: 14px;
  }
  .small{
      font-size: 11px;
      color:#2a2929
  }
    .modify-link {
      font-size: 14px;
      color:rgb(61,4,4);
      text-decoration: none;
      margin-left: auto;
    }
    
    .modify-link:hover {
      text-decoration: underline;
    }
    
    .header {
      background-color:rgb(61,4,4);
      color: white;
      display: flex;
      justify-content: space-between;
      padding: 10px 20px;
      align-items: center;
  
    }
    
    
    .booking-container {
      margin-top: 20px;
      padding-top: 10px;
      padding-bottom: 5px;
      width:100%;
      background-color: lightgrey;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    .route-i .modify-link {
      color:rgb(61,4,4);
      text-decoration: none;
      font-size: 14px;
    }
    
    .vehicle-options {
      display: flex;
      justify-content: space-around;
      padding: 15px;
      background-color: #f9f9f9;
    }
    
    .vehicle-type {
      text-align: center;
      font-size: 14px;
      color: #333;
      padding: 10px;
      cursor: pointer;
      width: 100px;
      height: 130px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      transition: color 0.3s;
    }
    
    .vehicle-image-container {
      width: 60px;
      height: 70px;
      border: 2px solid transparent;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 5px;
      transition: border-color 0.3s;
    }
    
    .vehicle-image-container img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
    }
  
    .vehicle-type .vehicle-name {
      font-size: 14px;
      font-weight: bold;
    }
    
    .vehicle-type .vehicle-price {
      font-size: 12px;
      color: #333;
    }
    
    .vehicle-type.active .vehicle-image-container {
      border-color:rgb(61,4,4);
    }
    
    .vehicle-type.active .vehicle-name,
    .vehicle-type.active .vehicle-price {
      color:rgb(61,4,4);
    }
    
    .vehicle-type:hover .vehicle-image-container {
      border-color:rgb(61,4,4);
    }
    
    .vehicle-type:hover .vehicle-name,
    .vehicle-type:hover .vehicle-price {
      color:rgb(61,4,4);
    }
    
    .card {
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      width: 85%;
      padding: 20px;
      margin-left: 10px;
      position: relative;
      text-align: left;
    }
    

    .badge {
      position: absolute;
      top: 10px;
      right: 15px;
      background: #e0e0e0;
      color: #444;
      font-size: 12px;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 4px;
    }
    
  
    .content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0; 
      margin-bottom: 0px;
    }
    

    .text-content {
      flex: 1;
      margin-right: 10px; 
    }
    
    .title {
      font-size: 18px;
      color: #333;
      margin-bottom: 10px;
    }
    
    .price {
      margin-bottom: 10px;
    }
    
    .current-price {
      font-size: 20px;
      color:rgb(61,4,4);
      font-weight: bold;
    }
    
    .original-price {
      font-size: 16px;
      color: #ff4d4d;
      text-decoration: line-through;
      margin-left: 8px;
    }
    
    .details {
      font-size: 14px;
      color: #555;
      margin-bottom: 8px;
    }
    
    .tax-note {
      font-size: 12px;
      color: #888;
    }
    

    .image-container {
      margin-top: 10px;
      max-width: 200px;
      margin-left: 0;
    }
    
    .car-image {
      max-width: 100%;
      height: auto;
      border-radius: 4px;
    }
    
    .select-button {
      background:rgb(61,4,4);
      color: #fff;
      font-size: 14px;
      font-weight: bold;
      border: none;
      border-radius: 4px;
      padding: 10px;
      text-align: center;
      width: 100%;
      cursor: pointer;
    }
    
    .select-button:hover {
      background: #0056b3;
    }
  
    .tabs-container {
      margin-top: 25px;
      padding-top: 10px;
      width: 95%;
      margin-left: 10px;
      border-radius: 10px;
      background-color: #fff;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    .tabs {
      display: flex;
      justify-content: center;
      border: 2px solid #ccc;
      border-radius: 10px;
      margin-bottom: 15px;
      margin-top: 10px;
      margin-left: 10px;
      margin-right: 10px;
      overflow: hidden;
    }
    
    .tab-btn {
      flex: 1;
      padding: 10px;
      background: #f0f0f0;
      border: none;
      text-align: center;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.3s, color 0.3s;
    }
    
    .tab-btn:not(:last-child) {
      border-right: 1px solid #ccc;
    }
    
    .tab-btn.active {
      background:rgb(61,4,4);
      color: #fff;
      border-radius: 8px;
      transition: 0.3s;
    }
    
    .contents {
      padding: 20px;
      font-size: 14px;
      color: #333;
    }
    
    ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    li {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .icon-circle {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      border: 2px solidrgb(61,4,4);
      border-radius: 50%;
      margin-right: 10px;
    }
    
    .icon-circle span {
      font-size: 18px;
      color:rgb(61,4,4);
    }
    
  </style>
</head>
<body>
  <!-- <project class="project"> -->
  <header class="header">
    <div class="fixed-header">
        <div class="header-left">
            <img src="https://via.placeholder.com/100x50" alt="Company Logo" class="company-logo">
        </div>

        <div class="header-right">
            <div class="contact-info">
                <div class="phone-box">
                    <i class="phone-icon">ðŸ“ž</i> <span>9045450000</span>
                </div>
            </div>
        </div>
        </div>
  </header>
  <br><br>
  <div class="booking-container">
          <div class="route-i">
            <div class="route">
                <span class="route-n" id="pickup_ft_change"></span>
                <span class="small" id="pickup_type_change"></span>
            </div>
            <div class="route">
                <span class="small">Pickup Date</span>
                <span id="pickup_date_change">28-11-2024</span>
            </div>
            <!-- <div class="route">
                <span class="small">Return Date</span>
                <span><b>28-11-2024</b></span>
            </div> -->
            <div class="route">
                <span class="small">Time</span>
                <span id="pickup_time_change"></span>
            </div>
          </div>
          <center><a href="#" class="modify-link">Modify Booking</a></center>
        </div>
      </div>

      <div class="vehicle-options">
        <div class="vehicle-type active" onclick="change_car(event, 'Sedan')">
          <p class="vehicle-name">Sedan</p>
          <div class="vehicle-image-container">
            <img src="Sedan.jpg" alt="Sedan" class="vehicle-image">
          </div>
          <p class="vehicle-price" id="change_sedan_price"></p>
        </div>
        <!-- â‚¹12194 -->
        <div class="vehicle-type" onclick="change_car(event, 'SUV')">
          <p class="vehicle-name">SUV</p>
          <div class="vehicle-image-container">
            <img src="Suv.jpg" alt="SUV" class="vehicle-image">
          </div>
          <p class="vehicle-price" id="change_suv_price"></p>
        </div>
        <div class="vehicle-type" onclick="change_car(event, 'Innova')">
          <p class="vehicle-name">Innova</p>
          <div class="vehicle-image-container">
            <img src="Innova.jpg" alt="Innova" class="vehicle-image">
          </div>
          <p class="vehicle-price" id="change_innova_price"></p>
        </div>
        <div class="vehicle-type" onclick="change_car(event, 'Crysta')">
          <p class="vehicle-name">Crysta</p>
          <div class="vehicle-image-container">
            <img src="Crysta.jpg" alt="Crysta" class="vehicle-image">
          </div>
          <p class="vehicle-price" id="change_crysta_price"></p>
        </div>
        <!-- <div class="vehicle-type">
          <p class="vehicle-name">TT (12)</p>
          <div class="vehicle-image-container">
            <img src="sedan.avif" alt="TT (12)" class="vehicle-image">
          </div>
          <p class="vehicle-price">â‚¹25092</p>
        </div> -->
      </div>
      
      <div class="card">
        <div class="badge">4 seater</div>
        <div class="content">
          <div class="text-content">
            <h2 class="title" id="change_car_title">Sedan</h2>
            <div class="price">
              <span class="current-price" id="current_price"></span>
              <span class="original-price" id="clone_price"></span>
            </div>
            <p class="details" id="change_distance"></p>
            <p class="tax-note">Inclusive of GST</p>
          </div>
          <div class="image-container">
            <img id="update_img" src="pngwing.com.png" alt="Toyota Etios Sedan" class="car-image">
          </div>
        </div>
        <button class="select-button" onclick="send_third()">SELECT CAR</button>
      </div>
    
      <div class="tabs-container">
        <div class="tabs">
          <button class="tab-btn active" onclick="switchTab(event, 'inclusions')">INCLUSIONS</button>
          <button class="tab-btn" onclick="switchTab(event, 'exclusions')">EXCLUSIONS</button>
          <button class="tab-btn" onclick="switchTab(event, 'facilities')">FACILITIES</button>
          <button class="tab-btn" onclick="switchTab(event, 'tandc')">T&C</button>
        </div>
        <div class="contents" id="inclusions">
          <ul>
            <li>
              <div class="icon-circle"><span>ðŸ”§</span></div>
              Base Fare and Fuel Charges
            </li>
            <li>
              <div class="icon-circle"><span>ðŸ‘¤</span></div>
              Driver Allowance
            </li>
            <li>
              <div class="icon-circle"><span>ðŸ“„</span></div>
              GST (5%)
            </li>
          </ul>
        </div>
        <div class="contents" id="exclusions" style="display: none;">
          <p>No exclusions specified.</p>
        </div>
        <div class="contents" id="facilities" style="display: none;">
          <p>Facilities details will go here.</p>
        </div>
        <div class="contents" id="tandc" style="display: none;">
          <p>Terms and conditions will go here.</p>
        </div>
      </div>
    <!-- </project> -->
</body>





<script>

var details =  {
          "type": null,
          "hrs" : null,
          "sedan": null,
          "suv": null,
          "innova" : null,
          "crysta" : null,
          "distance" : null,
          "duration" : null,
          'car_selected' : null,
          'selected_cost' : null,
          'total_price'   : null,
          dl : 400
      }

  console.log("Next Page Data")
   const userData = JSON.parse(localStorage.getItem("userData"));
   console.log(userData)
   details.type = userData.Type
   document.querySelectorAll('.vehicle-type').forEach(vehicle => {
  vehicle.addEventListener('click', () => {
  document.querySelector('.vehicle-type.active').classList.remove('active');
  vehicle.classList.add('active');

  });
});

document.querySelector('.select-button').addEventListener('click', () => {
  console.log(details)
});

function switchTab(event, tabId) {
const tabs = document.querySelectorAll('.tab-btn');
tabs.forEach(tab => tab.classList.remove('active'));


const contents = document.querySelectorAll('.contents');
contents.forEach(content => (content.style.display = 'none'));

event.currentTarget.classList.add('active');
document.getElementById(tabId).style.display = 'block';
}



function change_car(event, car_selected) {
  console.log(car_selected);
  document.getElementById("change_car_title").innerHTML = `${car_selected}`;
  var update_price = document.getElementById("current_price")

  if(car_selected === "Sedan"){
      up_price = details.sedan*details.distance
        update_price.innerHTML = `â‚¹ ${up_price}`;
        details.car_selected = car_selected;
        details.selected_cost = details.sedan;
        details.total_price = up_price;
        document.getElementById("clone_price").innerHTML = `â‚¹${up_price+450}`;
        document.getElementById("update_img").src = "pngwing.com.png";



  }
  else if(car_selected === "SUV"){
    up_price = details.suv*details.distance
    update_price.innerHTML = `â‚¹ ${up_price}`;
    details.car_selected = car_selected;
    details.selected_cost = details.suv;
    details.total_price = up_price;
    document.getElementById("clone_price").innerHTML = `â‚¹${up_price+450}`;
    document.getElementById("update_img").src = "cretapngwing.com.png";






  }
  else if(car_selected === "Innova"){
    up_price = details.innova*details.distance
    update_price.innerHTML = `â‚¹ ${up_price}`;
    details.car_selected = car_selected;
    details.selected_cost = details.innova;
    details.total_price = up_price;
    document.getElementById("clone_price").innerHTML = `â‚¹${up_price+450}`;
    document.getElementById("update_img").src = "innovapngwing.com.png";






  }
  else if(car_selected === "Crysta"){
    up_price = details.crysta*details.distance
    update_price.innerHTML = `â‚¹ ${up_price}`;
    details.car_selected = car_selected;
    details.selected_cost = details.crysta;
    details.total_price = up_price;
  document.getElementById("clone_price").innerHTML = `â‚¹${up_price+450}`;
  document.getElementById("update_img").src = "crystapngwing.com.png";




  }
}

</script>


<script>

    fetch('data.json')
        .then(response => response.json())
        .then(data => {
            data.forEach(item => {
              if(item.type === details.type){
                console.log("Work")
                details.sedan = item.sedan
                details.suv = item.suv
                details.innova = item.innova
                details.crysta = item.crysta
                console.log(details)

              }
            });
        })
        .catch(error => console.error('Error fetching JSON:', error));
  </script>
  

  <script>
    function load_data(){
      console.log("After detai")
      console.log(details.sedan*details.distance)
      var pickup_date_change = document.getElementById("pickup_date_change")
      pickup_date_change.innerHTML = `<b>${userData.Pick_Date}</b>`

      var pickup_time_change = document.getElementById("pickup_time_change")
      pickup_time_change.innerHTML = `<b>${userData.Pick_Time}</b>`

        
      var pickup_ft_change = document.getElementById("pickup_ft_change")
      pickup_ft_change.innerHTML = `<b>${userData.From} - ${userData.To}</b>`

      var pickup_type_change = document.getElementById("pickup_type_change")
      pickup_type_change.innerHTML = `<b>(${userData.Type})</b>`

      document.getElementById("current_price").innerHTML = `â‚¹${details.sedan*details.distance}`
      document.getElementById("clone_price").innerHTML = `â‚¹${details.sedan*details.distance+450}`;


      //update price to third page
        details.car_selected = "Sedan";
        details.selected_cost = details.sedan;
        details.total_price = details.sedan*details.distance;      

      // Car Update 

      var change_sedan_price = document.getElementById("change_sedan_price")
      change_sedan_price.innerHTML = `â‚¹${details.sedan*details.distance}`

      var change_suv_price = document.getElementById("change_suv_price")
      change_suv_price.innerHTML = `â‚¹${details.suv*details.distance}`

      var change_innova_price = document.getElementById("change_innova_price")
      change_innova_price.innerHTML = `â‚¹${details.innova*details.distance}`

      var change_crysta_price = document.getElementById("change_crysta_price")
      change_crysta_price.innerHTML = `â‚¹${details.crysta*details.distance}`
      
      var change_distance = document.getElementById("change_distance")
      change_distance.innerHTML = `${details.distance} KM | <br>${details.duration}`



      console.log(details)

    }

    let mapsLoaded = false;

        // Function to dynamically load Google Maps API
        function loadGoogleMapsAPI() {
            return new Promise((resolve, reject) => {
                if (mapsLoaded) {
                    resolve();
                    return;
                }

                const script = document.createElement("script");
                script.src = "https://maps.googleapis.com/maps/api/js?key=AIzaSyAvM9QYZOZaZPsHIOfnTWHJdbRiSHCuOUE&libraries=places";
                script.async = true;
                script.onload = () => {
                    mapsLoaded = true;
                    resolve();
                };
                script.onerror = () => reject("Failed to load Google Maps API");
                document.head.appendChild(script);
            });
        }

        async function calculateDistance() {
            const origin = userData.From;
            const destination = userData.To;
            try {
                await loadGoogleMapsAPI(); // Ensure the API is loaded
                const result = await getDistance(origin, destination);
                console.log(result);
                load_data();

            } catch (error) {
                console.log(error);
            }
        }

        function getDistance(origin, destination) {
            return new Promise((resolve, reject) => {
                const service = new google.maps.DistanceMatrixService();

                service.getDistanceMatrix(
                    {
                        origins: [origin],
                        destinations: [destination],
                        travelMode: google.maps.TravelMode.DRIVING,
                    },
                    (response, status) => {
                        if (status === google.maps.DistanceMatrixStatus.OK) {
                        details.distance = response.rows[0].elements[0].distance.text;
                        const distance = response.rows[0].elements[0].distance.text;
                        const duration = response.rows[0].elements[0].duration.text;
                        details.distance = parseFloat(details.distance.match(/\d+/)[0]);
                        details.duration = response.rows[0].elements[0].duration.text;
                            resolve({ distance, duration });
                        } else {
                            reject(status);
                        }
                    }
                );
            });
        }

    // function calculateDistance() {
    //         const origin = userData.From;
    //         const destination = userData.To;

    //         const service = new google.maps.DistanceMatrixService();

    //         service.getDistanceMatrix(
    //             {
    //                 origins: [origin],
    //                 destinations: [destination],
    //                 travelMode: google.maps.TravelMode.DRIVING,
    //             },
    //             (response, status) => {
    //                 if (status === google.maps.DistanceMatrixStatus.OK) {
    //                     details.distance = response.rows[0].elements[0].distance.text;
    //                     details.distance = parseFloat(details.distance.match(/\d+/)[0]);
    //                     details.duration = response.rows[0].elements[0].duration.text;
    //                 } else {
    //                     console.log("Distance Not Found")
    //                 }
    //             }
    //         );
    //     }
    calculateDistance()

  function send_third(){

    var receipt_data = {
      user_Data : userData,
      cost_data : details
  }
    localStorage.setItem("receipt_data", JSON.stringify(receipt_data));
    window.location.href = "confirm.html";

  }

  </script>
</html>
